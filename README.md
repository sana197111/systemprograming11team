# 시스템 프로그래밍 프로젝트 11조


## server.cpp

### 기능:
- 사용자가 침대에 있는지 확인
- 전화가 연결되어 있는지 확인
- 조건에 따라 자동으로 전등을 끔

### 주요 코드 구성 요소:
- 수정된 C 라이브러리 추가와 함께 C를 사용하여 소켓 서버 구축
- 사용자 위치와 전화 연결 여부 확인 후 조건에 맞게 조명을 조절하는 함수 구현
- 회로 파이썬을 사용하여 AMG88xx 적외선 카메라 센서를 통해 사람 감지

### 작동 과정:
- 소켓 서버가 포트 5000에서 클라이언트로부터 연결을 수락하고 메시지를 수신
- 조명을 끄는 조건인 사용자가 침대에 있고 전화가 연결되어 있다면, AMG88xx 센서를 사용하여 사람 위치 확인 후 전등을 끔
- 클라이언트로 응답 후 소켓 연결을 닫음
- C 및 Python 코드를 결합하여 원격으로 사용자의 위치와 전화 연결 상태에 따라 전등을 자동으로 끄는 스마트 홈 조명 시스템을 구현한 프로젝트

## 스마트폰 실행 앱 smartphone_tcp_code 

Java와 안드로이드 스튜디오로 구성되어 있습니다.
핸드폰을 쓰고 있다고 판단될 경우, TCP 통신을 통해 48을 보냅니다.
핸드폰을 쓰지않고, 잠에 든다면 TCP 통신을 통해 49를 보냅니다.

## 파이썬 파일 실행
rasberrypi_ex_code/amg88xx_simpletest.py

프로젝트는 사람의 온도를 감지하여 사람의 존재 여부를 판별하고, 
그에 따라서 서버를 가동시키거나 중지시키는 기능을 수행합니다.

### 사람 감지 서버 제어 프로젝트
이 프로젝트는 Adafruit AMG8833 Grid-Eye 적외선 카메라를 사용하여 
특정 온도 임계값을 초과하는 픽셀 값이 3개 이상 감지되면 사람이 있다고 판단하여 
서버를 시작하고, 그렇지 않으면 서버를 중지시킵니다.

### 주요 구성 요소
- Adafruit AMG88xx 센서를 사용한 온도 감지
- 구현된 서버를 처리하는 서브 프로세스 사용
- 사람 감지 여부에 따른 Yeelight 스마트 전구 제어
- 휴대폰 감지 
- 

### 코드 구조
- 필요한 라이브러리들을 임포트
- Yeelight 스마트 전구의 IP 주소를 설정하고, i2c 통신을 설정
- 온도 임계값과 프로세스 변수를 초기화
- 무한 루프에서 센서에서 읽은 온도를 바탕으로 사람 감지 여부를 판단
- 사람이 감지되면 서버 프로세스(server.cpp)를 실행하고, 서버가 실행되지 않도록 조건을 설정
- 사람이 감지되지 않으면 서버 프로세스를 종료하고, 조건을 재설정
